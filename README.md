# KRGPMagic — система управления плагинами для Autodesk Revit

**KRGPMagic** — это модульная система для централизованного управления пользовательскими плагинами и их отображением на ленте Autodesk Revit. Система позволяет гибко настраивать плагины, их группировку, параметры отображения и поведения через единый XML-файл и визуальный редактор.

---

## Основные компоненты

- **KRGPMagic_Schema.xml**  
  Главный XML-файл конфигурации, в котором описываются все плагины, их параметры, группировка и отображение в интерфейсе Revit.

- **SchemaEditor**  
  Визуальный редактор конфигурации (WinForms), позволяющий добавлять, удалять и настраивать плагины, группы PulldownButton, их свойства и взаимосвязи без ручного редактирования XML.

- **PluginInfo**  
  Модель данных для описания отдельного плагина (PushButton или SplitButton): путь к сборке, класс команды, иконки, описание, параметры отображения и поведения.

- **PulldownButtonDefinitionInfo**  
  Модель для описания групповых выпадающих кнопок (PulldownButton), которые могут содержать несколько плагинов.

- **SubCommandInfo**  
  Описание подкоманд для SplitButton-плагинов.

- **PluginManager**  
  Сервис для загрузки, инициализации и управления плагинами на основе конфигурации.

---

## Принцип работы

1. **Настройка**  
   Пользователь настраивает структуру плагинов и групп через SchemaEditor, сохраняя изменения в `KRGPMagic_Schema.xml`.

2. **Загрузка**  
   При запуске Revit и загрузке KRGPMagic, система читает конфигурацию, создает вкладки, панели, кнопки и группы на ленте Revit согласно описанию.

3. **Группировка и вложенность**  
   Поддерживается группировка плагинов в PulldownButton, а для SplitButton — вложенность подкоманд.

4. **Управление**  
   Включение/отключение плагинов и групп, а также их группировка, управляются через конфигуратор без необходимости перекомпиляции кода.

---

## Совместимость

- **Autodesk Revit:**  
  Поддерживаются версии Revit 2020, 2021, 2022, 2023 и выше (уточняется в зависимости от сборки плагинов).

- **.NET:**  
  Сборка ориентирована на **.NET Framework 4.8**.

- **Язык:**  
  C# 7.3.

- **Плагины:**  
  Должны реализовывать интерфейс `IExternalCommand` (Revit API).

---

## Важные особенности

- Централизованное управление всеми плагинами через один XML-файл.
- Гибкая группировка команд в PulldownButton и SplitButton.
- Визуальный редактор для удобства настройки без ручного редактирования XML.
- Поддержка иконок, описаний, версий, автозагрузки и других параметров для каждого плагина.
- Возможность быстро включать/отключать плагины и группы без перезапуска Revit.

---

**KRGPMagic** облегчает развертывание и поддержку большого количества пользовательских команд в корпоративной среде Revit, делая процесс прозрачным и управляемым для BIM-координаторов и разработчиков.
